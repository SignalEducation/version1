.l-section-small.is-bg-asphalt
  .l-wrap-medium
    .container-fluid
      .row
        .col-md-12
          %h1.h1.h-separator.h-separator-left
            =@group.name
          %h6
            =@group.description.to_s.truncate(200)
.l-section-small.is-bg-asphalt
  .l-wrap-medium
    .container-fluid
      .course-list-wrap
        .row
          -if current_user
            -@courses.each do |course|
              -log = @logs.where(subject_course_id: course.id).first
              .col-sm-6.col-md-4
                =link_to library_special_link(course), class: 'card card-course' do
                  .card-inner
                    %h3.h4.card-title
                      =course.try(:name)
                    %p.card-desc
                    -total_lesson = course.cme_count
                    -complete_lesson = log.try(:count_of_cmes_completed) || 0
                    -complete_percent = log.try(:percentage_complete)
                    %p.l-margin-bottom #{complete_lesson} out of #{total_lesson} lessons completed
                    .progress.l-margin-top-big
                      .progress-bar.cyanbar{'role'=>'progressbar', 'aria-valuenow'=> "#{complete_percent}", 'aria-minvalue'=>'0', 'aria-maxvalue'=>'100', 'style'=>"width: #{complete_percent}% ;" }
                  .card-label
                    .col-xs-3
                      -if log
                        Resume
                      -else
                        =t('views.general.browse')
                    .col-xs-9
                      =simple_time(course.total_video_duration)
          -else
            -@courses.each do |course|
              .col-sm-6.col-md-4
                =link_to library_special_link(course), class: 'card card-course' do
                  .card-inner{style: 'height: 163px'}
                    %h3.h4.card-title.l-margin-bottom
                      =course.try(:name)
                    %p.card-desc
                      -if course.try(:short_description)
                        =course.try(:short_description).truncate(150)
                      -else
                        =course.try(:description).truncate(150)
                  .card-label
                    .row
                      .col-md-12.col-xs-12
                        .col-md-6.col-xs-6
                          %h6
                            =t('views.general.browse')
                        .col-md-6.col-xs-6.text-right
                          %h6
                            =simple_time(course.total_video_duration)


-if current_user && (current_user.corporate_customer?)
  =render partial: 'layouts/new_footer'