.modal.fade#new-upload-modal{tabindex: -1, role: 'dialog', aria: {labelledby: 'uploadModalLabel', hidden: true} }
  =#form_for(StaticPageUpload.new, html: {role: 'form', class: 'form-horizontal', multipart: true}, format: 'js', authenticity_token: true, remote: true) do |u|
  =form_for(StaticPageUpload.new, remote: true, authenticity_token: true, format: 'js') do |u|

    =u.hidden_field :static_page_id, value: @static_page.id
    .modal-dialog
      .modal-content
        .modal-header
          %button{type: 'button', class: 'close', data: {dismiss: 'modal'}}
            %span{aria: {hidden: true}} &times
            %span{class: 'sr-only'} Close
          %h4.modal-title#uploadModalLabel Upload a file
        .modal-body

          .form-group
            =u.label :upload, t('views.static_page_uploads.form.upload'), class: 'control-label col-sm-4'
            .col-sm-8
              =u.file_field :upload, class: 'form-control'
          .form-group
            =u.label :description, class: 'control-label col-sm-4'
            .col-sm-8
              =u.text_field :description, class: 'form-control'

        .modal-footer
          %button{type: 'button', class: 'btn btn-default', data: {dismiss: 'modal'}}
            =t('views.general.cancel')
          =u.submit t('views.general.save'), class: 'btn btn-success'

:javascript

  $(document).on('ready', function() {
    alert('hello there');
    $("#new_static_page_upload").on("ajax:success", function(e, data, status, xhr) {
      $("#uploads-panel").append(xhr.responseText); alert('good'); return false;
    }).on("ajax:error", function(e, xhr, status, error) {
      $("#uploads-panel").append("<p>ERROR</p>"); alert('bad');
    });
    alert('ready');
  })
