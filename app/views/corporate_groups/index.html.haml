-if current_user.corporate_customer?
  #wrapper
    .hidden-xs
      #sidebar-wrapper.text-center
        %ul.sidebar-nav
          %li.first-li
            =link_to t('views.corporate_customers.show.overview'), corporate_customer_url(current_user.corporate_customer)
          %li
            =link_to t('views.corporate_students.index.corp_h1'), corporate_students_url
          %li.current-page
            =link_to t('views.corporate_groups.index.corp_h1'), corporate_groups_url
          %li
            =link_to t('views.subject_courses.index.h1'), subject_courses_url
          %li
            =link_to t('views.users.show.h1'), account_url
          %li
            =link_to t('views.corporate_students.index.corp_managers'), corporate_managers_url

    .main-content.margin-top
      -if flash[:success] || flash[:error] || flash[:warning]
        =render partial: 'layouts/flash_messages'
      .l-section-corp-groups.is-bg-asphalt.corporate-padding
        .container-fluid.l-padding-side-3x
          .row.l-margin-bottom.l-margin-top
            .col-md-6.col-sm-6.col-xs-6
              %h1.h-separator.h-separator-left
                =t('views.corporate_groups.index.h1')
            .col-md-6.col-sm-6.col-xs-6.l-margin-bottom.l-margin-top.text-right
              =link_to t('views.general.add_group'), new_corporate_group_url, class: 'btn btn-red l-padding-side-3x text-bold', title: t('views.general.new_tooltip')
          .row
            .col-md-9
              %p.h6
                Managers can create teams of users.  After a team has been created Managers can assign compulsory content and restrict other content that team members can access.

            .col-md-12.l-margin-top-big.l-margin-bottom-6x
              .corporate-box-item.table-box
                .table-responsive
                  %table.table{style: 'font-size: 18px;'}
                    %thead
                      %tr
                        %th.p
                          =t('views.corporate_groups.show.h1')
                        %th.p Manager
                        %th.p No. of Users
                        %th.p Edit Members
                        %th
                    %tbody
                      -@corporate_groups.each do |corporate_group|
                        %tr
                          %td.p
                            =corporate_group.name
                          %td.p
                            =User.where(id: corporate_group.corporate_manager_id).first.try(:full_name)
                          %td.p
                            =corporate_group.users.count
                          %td
                            =link_to t('views.general.show'), corporate_group_url(corporate_group), class: 'btn btn-small btn-purple'
                            =link_to t('views.general.edit_group'), edit_corporate_group_url(corporate_group), class: 'btn btn-small btn-purple'
                            =link_to t('views.corporate_groups.index.members'),
                corporate_group_edit_members_url(corporate_group_id: corporate_group.id), class: 'btn btn-small btn-purple'
                            -if corporate_group.destroyable?
                              =link_to t('views.general.delete'), corporate_group,
                  method: :delete, data: { confirm: t('views.general.delete_confirmation') }, class: 'btn btn-small btn-red'
    =render partial: 'layouts/corporate_footer'
-else
  .margin-top
    -if flash[:success] || flash[:error] || flash[:warning]
      =render partial: 'layouts/flash_messages'
  .l-section-small.is-bg-asphalt.margin-top
    .l-wrap
      .container-fluid
        .row.l-margin-bottom
          .col-md-12.text-center
            %h1.l-margin-bottom.l-margin-top.text-center.h-separator.h-separator-center
              Groups
          .col-md-12.l-margin-top-big.l-margin-bottom-6x
            -@corporate_customers.each do |cc|
              .corporate-box-item.table-box
                .table-responsive
                  %h2=cc.organisation_name
                  %table.table{style: 'font-size: 18px;'}
                    %thead
                      %tr
                        %th
                          =t('views.corporate_groups.show.h1')
                        %th Manager
                        %th No. of Users
                        %th Edit Members
                        %th
                    %tbody
                      -cc.corporate_groups.all_in_order.each do |corporate_group|
                        %tr
                          %td
                            =corporate_group.name
                          %td
                            =User.where(id: corporate_group.corporate_manager_id).first.try(:full_name)
                          %td
                            =corporate_group.users.count
                          %td
                            =link_to t('views.general.edit_group'), edit_corporate_group_url(corporate_group), class: 'btn btn-small btn-purple'
                            =link_to t('views.corporate_groups.index.members'),
                    corporate_group_edit_members_url(corporate_group_id: corporate_group.id), class: 'btn btn-small btn-purple'
                            -if corporate_group.destroyable?
                              =link_to t('views.general.delete'), corporate_group,
                      method: :delete, data: { confirm: t('views.general.delete_confirmation') }, class: 'btn btn-small btn-purple'

        .row
          =link_to t('views.general.add_group'), new_corporate_group_url, class: 'btn btn-red l-padding-side-3x text-bold', title: t('views.general.new_tooltip')


    =render partial: 'layouts/footer'