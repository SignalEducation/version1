.margin-top
  -if flash[:success] || flash[:error] || flash[:warning]
    =render partial: 'layouts/flash_messages'
.l-section-library.is-bg-asphalt
  .l-wrap.l-margin-top
    .container-fluid
      .course-list-wrap
        .row
          -@courses.each do |course|
            .col-sm-6.col-md-4
              -if current_user
                -if current_user.permission_to_see_content(course)
                  =link_to library_special_link(course), class: 'card card-course' do
                    .card-outer
                      .card-inner
                        %h3.h3.card-title.l-margin-bottom
                          =course.try(:name)
                        %p.card-desc
                          =course.try(:short_description).truncate(185)
                      .card-info
                        .col-md-6.col-xs-6
                          -if course.try(:live_date)
                            .days-left
                              .h8.text-center
                                =humanize_datetime(course.live_date)
                        .col-md-6.col-xs-6
                          -if course.total_video_duration.to_i > 0
                            %h6.pull-right
                              =simple_time(course.total_video_duration)

                    .card-label
                      .row
                        .col-md-12.col-xs-12
                          .col-md-6.col-xs-6
                            %h6
                              =t('views.general.browse')
                          .col-md-6.col-xs-6.text-right

                -else
                  =link_to product_course_url(course.home_page.public_url), class: 'card card-course' do
                    .card-outer
                      .card-inner
                        %h3.h3.card-title.l-margin-bottom
                          =course.try(:name)
                        %p.card-desc
                          =course.try(:short_description).truncate(185)
                      .card-info
                        .col-md-6.col-xs-6
                          -if course.try(:live_date)
                            .days-left
                              .h8.text-center
                                =humanize_datetime(course.live_date)
                        .col-md-6.col-xs-6
                          -if course.total_video_duration.to_i > 0
                            %h6.pull-right
                              =simple_time(course.total_video_duration)

                    .card-label
                      .row
                        .col-md-12.col-xs-12
                          .col-md-6.col-xs-6
                            %h6
                              =t('views.general.browse')
                          .col-md-6.col-xs-6.text-right


              -else
                -if course.home_page
                  =link_to product_course_url(course.home_page.public_url), class: 'card card-course' do

                    .card-outer
                      .card-inner
                        %h3.h3.card-title.l-margin-bottom
                          =course.try(:name)
                        %p.card-desc
                          =course.try(:short_description).truncate(185)
                      .card-info
                        .col-md-6.col-xs-6
                          -if course.try(:live_date)
                            .days-left
                              .h8.text-center
                                =humanize_datetime(course.live_date)
                        .col-md-6.col-xs-6
                          -if course.total_video_duration.to_i > 0
                            %h6.pull-right
                              =simple_time(course.total_video_duration)

                    .card-label
                      .row
                        .col-md-12.col-xs-12
                          .col-md-6.col-xs-6
                            %h6
                              =t('views.general.browse')
                          .col-md-6.col-xs-6.text-right

