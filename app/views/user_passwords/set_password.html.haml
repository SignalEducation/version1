%main
  %article.bg-gray5
    .container
      %header.hero-section.hero-section-external
        %h1.h1-hero.mb-3
          =t('views.user_passwords.set_password.h2')
        %p.p-hero.px-lg-8
          =t('views.user_passwords.set_password.paragraph_1')

      %section.pb-md-6.pb-5
        .forgot-password-section
          .form-box
            =form_tag(user_create_password_url(id: @user.password_reset_token), {method: :put, class: 'py-3 mr-5 ml-5', role: 'form'}) do
              =hidden_field(:hidden, :terms_and_conditions)
              =hidden_field(:hidden, :communication_approval)
              .row
                .col-sm-6
                  .form-group
                    =label_tag :password, t('views.users.form.password')
                    =password_field_tag :password, nil, placeholder: t('views.users.form.password_placeholder'), class: 'form-control', required: true

                .col-sm-6
                  .form-group
                    =label_tag :password_confirmation, t('views.users.form.password_confirmation')
                    =password_field_tag :password_confirmation, nil,  placeholder: t('views.users.form.password_confirmation_placeholder'), class: 'form-control', required: true

                .col-sm-12
                  .form-group
                    %label.check.communication_approval
                      %input{type: 'checkbox', id: 'communication_approval', required: true}
                        %span
                          %i.fa.fa-check
                        %span
                          ='I agree to receiving communication from LearnSignal, you can unsubscribe at any time'

                .col-sm-12
                  .form-group
                    %label.check.terms_and_conditions
                      %input{type: 'checkbox', id: 'terms_and_conditions', required: true}
                        %span
                          %i.fa.fa-check
                        ='I Agree to LearnSignal'
                        =link_to 'Terms & Conditions', terms_and_conditions_url, target: '_blank'


              .pt-3
                =submit_tag t('views.general.save'), class: 'btn btn-primary btn-sm'



:javascript


  $('input[type="checkbox"]').on('change', function() {
    if($('#terms_and_conditions').prop('checked') == true) {
      $("#hidden_terms_and_conditions").val('true');
    } else if($('#terms_and_conditions').prop('checked') == false) {
      $("#hidden_terms_and_conditions").val('false');
    }
  });

  $('input[type="checkbox"]').on('change', function() {
    if($('#communication_approval').prop('checked') == true) {
      $("#hidden_communication_approval").val('true');
    } else if($('#communication_approval').prop('checked') == false) {
      $("#hidden_communication_approval").val('false');
    }
  });
