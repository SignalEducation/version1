%main
  %article.bg-gray5
    .container
      %header.hero-section
        %h1.h2-hero.mb-2
          ='Basic Plan Registration'
        %p.p-hero.px-lg-6
          ='Sign up for limited access to our range of professional ACCA, CIMA and CPD courses and expert learning support. No credit card required. Set-up takes one minute!'

      %section.pb-md-6.pb-5
        .row.row-lg
          .col-lg-8.offset-lg-2.col-xs-offset-0
            .d-flex.flex-column.justify-content-center
              =form_for @user, url: create_student_url do |f|
                .bg-white.p-3.px-sm-5.pt-sm-4
                  .py-3
                    ='Get started with our free Basic Plan to explore our innovative learning platform and access selected course content.'

                  =render partial: 'layouts/error_messages', locals: {thing: @user, message: t('views.home_pages.sign_up_form.error_panel_caption')}
                  =f.hidden_field :locale, value: (params[:locale] || 'en')
                  =f.hidden_field :terms_and_conditions, id: 'hidden_term_and_conditions'
                  =f.hidden_field :communication_approval, id: 'hidden_communication_approval'
                  %fieldset.pb-3
                    %legend.sr-only Registration Details
                    .row
                      .col-sm-6
                        .form-group
                          =f.label :first_name, t('views.users.form.first_name')
                          =f.text_field :first_name, autofocus: true, placeholder: 'Enter your first name', class: 'form-control', id: 'user_first_name', required: true
                      .col-sm-6
                        .form-group
                          =f.label :last_name, t('views.users.form.last_name')
                          =f.text_field :last_name, class: 'form-control', placeholder: 'Enter your last name', id: 'user_last_name', required: true

                      .col-sm-6
                        .form-group
                          =f.label :email, t('views.users.form.email')
                          =f.email_field :email, class: 'form-control', placeholder: 'Enter your email', id: 'user_email', required: true

                      .col-sm-6
                        .form-group
                          =f.label :preferred_exam_body_id, t('views.users.form.area_of_study')
                          .input-group.input-group-lg
                            =f.collection_select :preferred_exam_body_id, ExamBody.all_active.all_in_order, :id, :name, {include_blank: t('views.general.select')}, {class: 'form-control custom-select', id: 'user_exam_body', required: true}

                      .col-sm-6
                        .form-group
                          =f.label :password, t('views.users.form.password')
                          =f.password_field :password, placeholder: t('views.users.form.create_password'), class: 'form-control', id: 'user_password', required: true

                      .col-sm-6
                        .form-group
                          =f.label :password_confirmation, t('views.users.form.password_confirmation')
                          =f.password_field :password_confirmation, placeholder: t('views.users.form.password_confirmation_placeholder'), class: 'form-control', id: 'user_password_confirmation', required: true

                    %fieldset.pt-2
                      %legend.sr-only Terms and Conditions checkboxes
                      .custom-control.custom-checkbox.mb-3
                        %input{type: "checkbox", class: "custom-control-input", id: "terms_and_conditions", required: true}
                        %label{class: "custom-control-label", for: "terms_and_conditions"}
                          I agree to learnsignal's
                          =link_to 'terms and conditions', terms_and_conditions_url, target: '_blank'
                      .custom-control.custom-checkbox.mb-3
                        %input{type: "checkbox", class: "custom-control-input", id: "communication_approval", required: true}
                        %label{class: "custom-control-label", for: "communication_approval"}
                          I agree to receiving communication from learnsignal

                      %p.pt-2
                        ="We're committed to your privacy. The information you provide is used to contact you about relevant content,
                           products, and services. You may unsubscribe from these communications at any time. For more information,
                            check out our"
                        =link_to 'Privacy Policy.', privacy_policy_url, target: '_blank'


                        .pt-4
                          =f.submit 'Register Now', class: 'btn btn-primary btn-sm', id: 'signUp'
                          .sk-circle
                            .sk-circle1.sk-child
                            .sk-circle2.sk-child
                            .sk-circle3.sk-child
                            .sk-circle4.sk-child
                            .sk-circle5.sk-child
                            .sk-circle6.sk-child
                            .sk-circle7.sk-child
                            .sk-circle8.sk-child
                            .sk-circle9.sk-child
                            .sk-circle10.sk-child
                            .sk-circle11.sk-child
                            .sk-circle12.sk-child




:javascript

  $(".sk-circle").hide();
  $("#new_user").submit(function(ev) {
    ev.preventDefault();
    $("#signUp").hide();
    $(".sk-circle").show();
    this.submit();
  });


  $('input[type="checkbox"]').on('change', function() {
    if($('#terms_and_conditions').prop('checked') == true) {
      $("#hidden_term_and_conditions").val('true');
    } else if($('#terms_and_conditions').prop('checked') == false) {
      $("#hidden_term_and_conditions").val('false');
    }
  });

  $('input[type="checkbox"]').on('change', function() {
    if($('#communication_approval').prop('checked') == true) {
      $("#hidden_communication_approval").val('true');
    } else if($('#communication_approval').prop('checked') == false) {
      $("#hidden_communication_approval").val('false');
    }
  });
