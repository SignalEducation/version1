=render partial: 'layouts/external_navbar'
%main
  .container-bg.home-hero-alt-bg.bg-group{style: "background-image: url(#{@group.background_image.url});", title: "#{@group.name} Courses"}
    .container.home-hero-container
      %article.home-hero

        .row.no-gutters
          .col-sm-12.col-md-6
            %header.home-hero-header.py-6
              %h1.h1-mega.text-white
                -if @exam_body&.landing_page_h1.present?
                  =@exam_body.landing_page_h1
                -else
                  ="Prepare for your #{@exam_body.name} exam"
              %p.p-hero.text-white.py-4
                -if @exam_body&.landing_page_paragraph.present?
                  =@exam_body.landing_page_paragraph
          .col-sm-12.col-md-6
            -if @exam_body&.logo_image.present?
              .exam-body-img-wrap
                =image_tag(@exam_body.logo_image, class: 'px-md-5 px-xl-0', alt: "#{@exam_body.name} Logo")



  .container-bg
    .container
      %article.py-4
        %header.pb-sm-4.pb-md-5
          .row.row-lg
            -@group.courses.all_active.all_in_order.each do |course|
              .col-lg-6.col-xl-4
                =link_to library_special_link(course), class: 'card card-horizontal flex-row card-mint', data: { toggle: 'tooltip', placement: 'right', animation: 'true', delay: { "show": 300, "hide": 100 }}, title: "#{course.short_description}", onclick: "gtag('event', 'clicks_course_name', {'event_category': 'pre-registration', 'event_label': #{course.name})" do
                  .card-header.d-flex.justify-content-center.align-items-center
                    -# TODO - Convert this into partial
                    -if course.unit_label
                      .pb-0.d-flex.flex-column.align-items-center
                        .mb-3.mx-md-2
                          %i{"aria-label" => course.icon_label, :role => "img", class: course.icon_label ? course.icon_label : 'budicon-office-bag-c', style: "color: #{course.highlight_colour};"}
                        %p.m-0.text-left.text-md-center{style: "color: #{course.highlight_colour};"}
                          =course.unit_label
                    -else
                      %i{"aria-label" => course.icon_label, :role => "img", class: course.icon_label ? course.icon_label : 'budicon-office-bag-c', style: "color: #{course.highlight_colour};"}

                  .card-body.d-flex.flex-column.justify-content-center
                    %small.card-category.mb-2{style: "color: #{course.highlight_colour};"}
                      -if course.preview && course.release_date
                        ="Coming #{course.release_date.strftime("%B, %Y")}"
                      -else
                        =course.category_label
                    %h5.card-title.mb-1
                      %span.mr-1
                        =course.name


  -if @group && @subscription_plans && @subscription_plans.any?
    .container-bg.bg-gray5
      .container#plans
        %article.py-6
          %header.text-center.pb-5.pb-md-6
            %h2.h1-mega
              ="#{@group.name} Subscription"
            %p.p-hero.px-lg-8
              -if @exam_body&.subscription_page_subheading_text.present?
                =@exam_body.subscription_page_subheading_text
              -else
                ='Achieve your learning goals with a learnsignal subscription plan and enjoy professional courses delivered online so that you can study on a schedule that suits you.'

          .row.row-lg.justify-content-center
            -@subscription_plans.each do |plan|
              .col-lg-4
                %article.card.card-primary.card-primary-alt.medium-gap
                  -if plan.most_popular
                    .card-banner.bg-mint
                      %large.text-white
                        Most popular payment plan
                  .card-body.text-center.py-4.py-sm-5
                    %h2.card-title
                      =t("views.general.payment_frequency_in_months.a#{plan.payment_frequency_in_months}")

                    %ul.list-centered
                      -if plan.bullet_points_list && !plan.bullet_points_list.empty?
                        - plan.bullet_points_list.split(/, ?/).each do |bullet|
                          %li=bullet
                      -else
                        %li="Access all #{@group.name} courses"
                        %li="Topic-by-topic lectures"
                        %li="24/7 tutor support"

                      -unless plan.exam_body.name == "CPD"
                        %li{style: 'font-style: italic;'}
                          Cancel anytime

                    %p.h2.mb-0
                      =plan.currency.format_number(plan.price)

                    -if plan.monthly_percentage_off
                      %p.h5.text-gray2
                        Save over
                        =plan.monthly_percentage_off
                        ='%'
                    .mt-auto
                      =link_to subscription_checkout_special_link(plan.exam_body_id, plan.guid), class: 'btn btn-secondary btn-sm', onclick: "addToCart('#{plan.currency.iso_code}', '#{plan.name}', '#{plan.id}', '#{plan.price}', '#{plan.exam_body.name}');" do
                        Choose this plan


  =render partial: 'customer_support_section'


:javascript
  $(function () {
    $('[data-toggle="tooltip"]').tooltip({
      template: '<div class="tooltip tooltip-custom" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>'
    })
  })
