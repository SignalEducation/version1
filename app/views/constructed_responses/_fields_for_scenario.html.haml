.question-box-item.question
  .row
    %h3.l-margin-bottom
      =scenario.object.id.nil? ? t('views.constructed_responses.form.new_scenario') : t('views.constructed_responses.form.scenario_number') + scenario.object.id.to_s
    .col-sm-12
      .form-group
        =scenario.hidden_field :sorting_order

        .quiz-question
          =scenario.label :text_content, t('views.constructed_responses.form.scenarios.text_content'), class: 'control-label'
          .input-group.input-group-lg.full-width
            =scenario.text_area :text_content, as: :summernote, class: 'form-control', style: 'border-radius: 6px;', id: 'scenario_text_area'
          %br/

        =scenario.fields_for :scenario_questions do |scenario_question|
          =scenario_question.hidden_field :sorting_order
          .quiz-question
            =scenario_question.label :text_content, t('views.constructed_responses.form.scenario_question.text_content'), class: 'control-label'
            .input-group.input-group-lg.full-width
              =scenario_question.text_area :text_content, as: :summernote, class: 'form-control', style: 'border-radius: 6px;', id: 'scenario_question_text_area'
            %br/
          =scenario_question.fields_for :scenario_answer_templates do |scenario_answer_template|
            =scenario_answer_template.hidden_field :sorting_order

            =scenario_answer_template.label :editor_type, t('views.constructed_responses.form.type'), class: 'control-label'
            .input-group.input-group-lg.full-width
              =scenario_answer_template.select :editor_type, ScenarioAnswerTemplate::FORMAT_TYPES, {include_blank: t('views.general.select')}, {class: 'form-control'}
            %br/

            .l-margin-top-big
              =scenario_answer_template.hidden_field :text_content
              =link_to 'Update Hidden Field', '#', class: 'btn btn-cyan', id: 'update_button'

              #spreadsheet{style: 'width: 100%;'}



:javascript
  var storedJson = $("#course_module_element_constructed_response_attributes_scenarios_attributes_0_scenario_questions_attributes_0_scenario_answer_templates_attributes_0_text_content").val();
  var paredJson = JSON.parse(storedJson);

  $("#spreadsheet").kendoSpreadsheet({sheetsbar: false});

  var spreadsheet = $("#spreadsheet").data("kendoSpreadsheet");
  spreadsheet.fromJSON(paredJson);



  $('#update_button').click(function() {
    var data = spreadsheet.toJSON();
    var json = JSON.stringify(data, null, 2);


    $("#course_module_element_constructed_response_attributes_scenarios_attributes_0_scenario_questions_attributes_0_scenario_answer_templates_attributes_0_text_content").val(json);

  });




  $('#scenario_text_area').summernote({
    height: '100',
    disableDragAndDrop: true
  });

  $('#scenario_question_text_area').summernote({
    height: '100',
    disableDragAndDrop: true
  });
