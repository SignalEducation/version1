%article.card
  .card-body
    %h2.mb-4.text-gray2
      Subscription Payment Cards
    .table-responsive
      %table.table
        %thead
          %tr
            %th
              Ending In
            %th
              Expiration
            %th
              Status
            %th


        %tbody
          -@subscription_payment_cards.each do |card|
            %tr
              %td
                =card.last_4
              %td
                =card.expiry_month
                &#45;
                =card.expiry_year
              %td
                -if !card.status == 'expired'
                  Card Expired
                -else
                  -if card.is_default_card?
                    Active
                  -else
                    =link_to t('views.users.show.use_this_card'), subscription_payment_card_path(id: card.id,
                     subscription_payment_card: {make_default_card: true}),
                      method: :put, data: {confirm: t('views.users.show.confirm_use_this_card')}, class: 'btn btn-xs btn-secondary'
              %td
                -if card.destroyable?
                  =link_to t('views.users.show.remove_this_card'), card, method: :delete, data: { confirm: t('views.general.delete_confirmation') }, class: 'btn btn-xs btn-danger'



    #add-card.col-md-12.l-margin-top-big

      %a{data: {target: '#add-card-modal', toggle: 'modal'}, href: '#', class: 'btn btn-primary btn-sm add-card'}
        =t('views.users.show.new_card')
