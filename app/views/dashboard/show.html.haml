%main
  %article.dashboard.bg-white
    -if current_user.non_verified_user?
      .container.pt-4.text-left.w-100
        .alert.alert-warning.py-4
          %svg{:fill => "none", :height => "20", :viewbox => "0 0 20 24", :width => "20", :xmlns => "http://www.w3.org/2000/svg"}
            %path{"clip-rule" => "evenodd", :d => "M2.94 6.4124C2.35524 6.77788 2 7.41882 2 8.1084V15.9999C2 17.1045 2.89543 17.9999 4 17.9999H16C17.1046 17.9999 18 17.1045 18 15.9999V8.1084C18 7.41882 17.6448 6.77788 17.06 6.4124L11.06 2.6624C10.4115 2.25706 9.58854 2.25706 8.94 2.6624L2.94 6.4124ZM5.5547 8.83462C5.09517 8.52826 4.4743 8.65244 4.16795 9.11197C3.8616 9.5715 3.98577 10.1924 4.4453 10.4987L9.4453 13.8321C9.7812 14.056 10.2188 14.056 10.5547 13.8321L15.5547 10.4987C16.0142 10.1924 16.1384 9.5715 15.8321 9.11197C15.5257 8.65244 14.9048 8.52826 14.4453 8.83462L10 11.7981L5.5547 8.83462Z", :fill => "#f87171", "fill-rule" => "evenodd"}
          %b
            ACTION PENDING.
          Verify your email address to continue your content access
          -if !current_user.email_verified && current_user.email_verification_code
            =link_to resend_verification_mail_url(current_user.email_verification_code), method: :post, class: 'btn verification-btn btn-sm mb-3 mb-sm-0', style: 'position: absolute;right: 16px;top: 16px;' do
              ='Resend Email'

    
    %header
      .position-relative.container.d-flex.flex-column.flex-wrap.flex-sm-nowrap.justify-content-between
        .mw-0
          %h1.h1-hero.pt-5
            =t('views.dashboard.student.h1')
        %nav.account-nav
          %ul#dashboardTabs.dashboardTabsNav{:role => "tablist"}
            -if @enrollments.any?
              %li.dashboardTabsNav-navItem
                %a#enrollments-tab.dashboardTabsNav-navItemLink.active{"aria-controls" => "enrollments", "aria-selected" => "true", "data-toggle" => "tab", :href => "#enrollments", :role => "tab"}
                  Enrolments
              %li.dashboardTabsNav-navItem
                %a#activity-tab.dashboardTabsNav-navItemLink{"aria-controls" => "activity", "aria-selected" => "false", "data-toggle" => "tab", :href => "#activity", :role => "tab"}
                  Activity
            -else
              -if current_user.exercises.any?
                %li.dashboardTabsNav-navItem
                  %a#activity-tab.dashboardTabsNav-navItemLink.active{"aria-controls" => "activity", "aria-selected" => "false", "data-toggle" => "tab", :href => "#activity", :role => "tab"}
                    Activity
                -if current_user.exercises.any?
                  %li.dashboardTabsNav-navItem
                    %a#exercises-tab.dashboardTabsNav-navItemLink{"aria-controls" => "exercises", "aria-selected" => "true", "data-toggle" => "tab", :href => "#exercises", :role => "tab"}
                      Exercises
        -# .dashboardActions
        -#   -if current_user.standard_student_user? && current_user&.preferred_exam_body_id && !current_user.valid_access_for_exam_body?(current_user&.preferred_exam_body_id, current_user&.preferred_exam_body&.group&.id)
        -#     =link_to pricing_url(current_user&.preferred_exam_body&.group&.name_url), class: 'btn btn-secondary btn-sm btn-sm-arrow-right mb-3 mb-sm-0' do
        -#       ='LifeTime Membership'


      %section.dashboard__contentContainer.border-top.bg-gray5
        .container.d-flex.flex-sm-row.dashboard__wrapper
          -# .col-lg-2-7
          -#   %nav.mb-4.account-nav
          -#     %ul#dashboardTabs.nav.nav-tabs.nav-tabs-vertical{:role => "tablist"}
          -#       -if @enrollments.any?
          -#         %li.nav-item
          -#           %a#enrollments-tab.nav-link.active{"aria-controls" => "enrollments", "aria-selected" => "true", "data-toggle" => "tab", :href => "#enrollments", :role => "tab"}
          -#             Enrolments
          -#         %li.nav-item
          -#           %a#activity-tab.nav-link{"aria-controls" => "activity", "aria-selected" => "false", "data-toggle" => "tab", :href => "#activity", :role => "tab"}
          -#             Activity
          -#       -else
          -#         %li.nav-item
          -#           %a#activity-tab.nav-link.active{"aria-controls" => "activity", "aria-selected" => "false", "data-toggle" => "tab", :href => "#activity", :role => "tab"}
          -#             Activity
          -#       -if current_user.exercises.any?
          -#         %li.nav-item
          -#           %a#exercises-tab.nav-link{"aria-controls" => "exercises", "aria-selected" => "true", "data-toggle" => "tab", :href => "#exercises", :role => "tab"}
          -#             Exercises

          .col-lg-9.p-0
            #dashboardTabsContent.tab-content
              -if @enrollments.any?
                #enrollments.tab-pane.show.active.tab-dashboard.tab-enrollments{"aria-labelledby" => "enrollments-tab", :role => "tabpanel"}
                  =render partial: 'enrollments'

                #activity.tab-pane.tab-account.tab-dashboard{"aria-labelledby" => "activity-tab", :role => "tabpanel"}
                  =render partial: 'activity'
              -else
                #activity.tab-pane.tab-account.active.tab-dashboard{"aria-labelledby" => "activity-tab", :role => "tabpanel"}
                  =render partial: 'activity'

              -if current_user.exercises.any?
                #exercises.tab-pane.show.tab-dashboard.tab-exercises{"aria-labelledby" => "exercises-tab", :role => "tabpanel"}
                  =render partial: 'exercises'
          .col-lg-3
            .dashboardActions
              -# -if current_user.standard_student_user? && current_user&.preferred_exam_body_id && !current_user.valid_access_for_exam_body?(current_user&.preferred_exam_body_id, current_user&.preferred_exam_body&.group&.id)
              -#   =link_to pricing_url(current_user&.preferred_exam_body&.group&.name_url), class: 'btn btn-secondary btn-sm btn-sm-arrow-right mb-3 mb-sm-0' do
              -#     ='LifeTime Membership'



:javascript
  $(document).ready(function(){
    hash = window.location.hash;
    elements = $('a[href="' + hash + '"]');
    if (elements.length > 0) {
      elements.click();
    }
    if (location.hash) {
      setTimeout(function() {
          window.scrollTo(0, 0);
      }, 1);
    }

  });
