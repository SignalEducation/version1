%div{role: 'tabpanel'}
  .is-bg-purple-2.coursebar
    .l-wrap
      .container-fluid
        .row
          .col-md-12{role: 'tablist'}
            %a.coursetype.l-margin-top{href: '#active', aria: {controls: 'in-progress'}, role: 'tab', data: {toggle: 'tab'}}
              ='Active Courses'
            %a.coursetype.l-margin-top{href: '#completed', aria: {controls: 'completed'}, role: 'tab', data: {toggle: 'tab'}}
              ='Complete Courses'

  .l-section-small.is-bg-asphalt
    .tab-content
      .l-wrap.active.tab-pane.fade.in#active{role: 'tabpanel'}
        .container-fluid
          .row
            .col-md-12.text-center
              %h2.l-margin-bottom.l-margin-top.text-center.h-separator.h-separator-center
                ="You are making good progress, #{current_user.try(:first_name).try(:capitalize)}!"
              %p{'style'=>'font-size: 24px'}
                My Active Courses
          .row.l-margin-bottom-huge
            -@incomplete_courses.each do |course|
              .col-md-4.l-margin-top
                = link_to course_special_link(course), class: 'box-item no-image-box-item panel text-center', style: 'background-image: 0;' do
                  .panel-icon.icon-big
                    %i.glyphicon.glyphicon-pencil
                  .panel-body
                    %h4.text-bold.one-line-text
                      =course.try(:name)
                    %p
                      -if course.short_description
                        =course.try(:short_description).to_s.truncate(30)
                      -else
                        =course.parent.try(:name)

                    - #total_lesson = course.active_children.count
                    - #complete_lesson = course.number_complete_by_user_or_guid(current_user.id, current_session_guid)
                    - #complete_percent = course.percentage_complete_by_user_or_guid(current_user.id, current_session_guid)
                    -#%p.l-margin-bottom #{complete_lesson} out of #{total_lesson} lessons completed
                    -#.progress.l-margin-top-big
                      .progress-bar.cyanbar{'role'=>'progressbar', 'aria-valuenow'=> "#{complete_percent}", 'aria-minvalue'=>'0', 'aria-maxvalue'=>'100', 'style'=>"width: #{complete_percent}% ;" }
                  .box-label continue

      .tab-pane.fade#completed{role: 'tabpanel'}
        .l-wrap.active.tab-pane.fade.in{role: 'tabpanel'}
          .container-fluid
            .row
              .col-md-12.text-center
                %h2.l-margin-bottom.l-margin-top.text-center.h-separator.h-separator-center
                  ="You are making good progress, #{current_user.try(:first_name).try(:capitalize)}!"
                %p{'style'=>'font-size: 24px'}
                  My Completed Courses
            .row.l-margin-bottom-huge
              -@completed_courses.each do |course|
                .col-md-4.l-margin-top
                  =link_to course_special_link(course), class: 'box-item no-image-box-item panel text-center' do
                    .panel-icon.icon-big
                      %i.glyphicon.glyphicon-pencil
                    .panel-body
                      %h4.text-bold.one-line-text
                        =course.try(:name)
                      %p
                        -if course.short_description
                          =course.try(:short_description).to_s.truncate(30)
                        -else
                          =course.parent.try(:name)

                      - #total_lesson = course.course_modules.count
                      - #complete_lesson = course.course_modules.where(student_exam_tracks.percentage_complete = 100).count
                      - #complete_percent = course.percentage_complete_by_user_or_guid(current_user.id, current_session_guid)
                      -#%p.l-margin-bottom #{complete_lesson} out of #{total_lesson} lessons compeleted
                      -#.progress.l-margin-top-big
                        .progress-bar.cyanbar{'role'=>'progressbar', 'aria-valuenow'=> "#{complete_percent}", 'aria-minvalue'=>'0', 'aria-maxvalue'=>'100', 'style'=>"width: #{complete_percent}% ;" }
                    .box-label continue


=render partial: 'shared/activate_tab'