-if current_user.corporate_customer?
  -if flash[:success] || flash[:error] || flash[:warning]
    =render partial: 'layouts/flash_messages'
.l-section-small.is-bg-asphalt
  .l-wrap
    .container-fluid
      .row.l-margin-bottom
        .col-md-12.text-center
          %h1.l-margin-bottom.l-margin-top.h-separator.h-separator-center{style: 'letter-spacing:1.5px;'}
            =t('views.subject_courses.show.h1')
            \-
            =@subject_course.name
        -if @subject_course.children.count < 1
          .row.l-margin-top.l-margin-bottom
            .col-md-10.col-md-offset-1
              %p.h6.text-center
                Please create a Course Module to begin.  A course module will hold a collection of Videos and Quizzes under the same topic.  Each topic should have a separate Module.  The name of the Module should reflect the topic.
          .row.l-margin-top-big.text-center
            =link_to t('views.course_modules.new.h1'), course_module_special_link(@subject_course), class: 'btn btn-red'

        -else
          .pull-right
            =link_to t('views.course_modules.new.h1'), course_module_special_link(@subject_course), class: 'btn btn-red'
        .row.l-margin-top.l-margin-bottom
          .col-md-12.l-margin-top
            .ol.sortable-area
              -@subject_course.children.all_in_order.each do |course_module|
                .li.l-margin-bottom-big
                  .no-image-box-item.table-box
                    .table-responsive
                      .col-md-10.l-margin-bottom
                        %h2=course_module.name.to_s.truncate(50)
                      -unless current_user.corporate_customer?
                        .col-md-2
                          .pull-right
                            =tick_or_cross(course_module.active)
                            -#%span.glyphicon.glyphicon-align-justify{title: t('views.general.drag_to_reorder')}
                      %table.table.sorted_table{data: {destination: course_module_elements_url}, id: course_module.id, style: 'font-size: 18px;'}
                        %thead
                          %tr
                            %th Name
                            %th Active
                            %th Type
                            -unless current_user.corporate_customer?
                              %th
                            %th
                            %th
                        %tbody
                          -course_module.children.all_in_order.each do |cme|
                            %tr{id: cme.id, data: {parent: course_module.id, destination: course_module_elements_url}}
                              %td
                                =cme.name.to_s.truncate(30)
                              -unless current_user.corporate_customer?
                                %td
                                  =tick_or_cross(cme.active)
                              %td
                                =cme.type_name
                              %td
                                =link_to t('views.general.edit'), edit_course_module_element_url(cme.id), class: 'btn btn-small btn-purple'
                                =link_to t('views.course_module_elements.show.preview'), cme, class: 'btn btn-small btn-purple', target: '_blank'
                                -if cme.destroyable?
                                  =link_to t('views.general.delete'), cme, method: :delete, data: { confirm: t('views.general.delete_confirmation') }, class: 'btn btn-red btn-small'
                              %td
                                %span.glyphicon.glyphicon-sort{title: t('views.general.drag_to_reorder')}

                          -if course_module.course_module_jumbo_quiz
                            %tr
                              %td
                                =course_module.course_module_jumbo_quiz.name
                              %td
                                =tick_or_cross(course_module.course_module_jumbo_quiz.active)
                              %td
                                ='Jumbo'
                              %td
                                =link_to t('views.general.edit'), edit_course_module_jumbo_quiz_url(course_module.course_module_jumbo_quiz), class: 'btn btn-small btn-purple'
                              %td
                              %td


                      .col-md-6
                        =link_to t('views.course_module_elements.form.new_video'), new_course_module_element_url(type: 'video', cm_id: course_module.id), class: 'btn btn-purple'
                        =link_to t('views.course_module_elements.form.new_quiz'), new_course_module_element_url(type: 'quiz', cm_id: course_module.id), class: 'btn btn-purple'
                        -#unless course_module.course_module_jumbo_quiz
                          =link_to t('views.course_module_jumbo_quiz.show.h1'), new_course_module_jumbo_quiz_url(cm_id: course_module.id), class: 'btn btn-purple'
                      .col-md-6
                        .pull-right
                          =link_to t('views.course_modules.edit.h1'), edit_course_module_url(course_module), class: 'btn btn-purple'
                          =link_to t('views.general.delete'), course_module, method: :delete, data: { confirm: t('views.general.delete_confirmation') }, class: 'btn btn-red'

-if current_user.corporate_customer?
  =render partial: 'layouts/new_footer'


