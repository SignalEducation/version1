%header.header
  %nav.fixed-top
    .navbar.navbar-dark.navbar-expand-lg
      .container.animate.fade-in-up
        %button.navbar-toggler{"aria-controls" => "navbarNavDropdown", "aria-expanded" => "false", "aria-haspopup" => "true", "aria-label" => "Toggle navigation", "data-target" => "#navbarNavDropdown", "data-toggle" => "collapse", :type => "button"}
          %span.navbar-toggler-bar.frst
          %span.navbar-toggler-bar.scnd
        =link_to home_url, class: 'navbar-brand logo' do
          =image_tag('learnsignal-Logo-white.svg', class: 'logo-img', alt: "LearnSignal Logo")

        #navbarNavDropdown.collapse.navbar-collapse.justify-content-end
          %ul.navbar-nav.align-items-lg-center

            -if current_user
              -if current_user&.preferred_exam_body_id && !current_user&.valid_access_for_exam_body?(current_user&.preferred_exam_body_id, current_user&.preferred_exam_body&.group&.id)
                %li.nav-item
                  =link_to pricing_url(current_user&.preferred_exam_body&.group&.name_url), class: 'nav-link' do
                    %span Pricing
              -elsif !current_user&.preferred_exam_body_id && !current_user&.valid_subscription?
                %li.nav-item
                  =link_to pricing_url, class: 'nav-link' do
                    %span Pricing
              %li.nav-item
                =link_to student_dashboard_url, class: 'nav-link' do
                  %span Dashboard
              %li.nav-item
                =link_to library_url, class: 'nav-link' do
                  %span Library

              -if current_user.non_student_user?
                %li.nav-item
                  =link_to management_consoles_url, class: 'nav-link' do
                    %span Console


              %li.nav-item.dropdown
                %a#navbarDropdown.nav-link.navbar-login.dropdown-toggle{"aria-expanded" => "false", "aria-haspopup" => "true", "data-toggle" => "dropdown", :href => "#", :role => "button"}
                  %span
                    =t('views.general.user_name') + current_user.first_name.to_s
                .dropdown-menu.dropdown-menu-right{"aria-labelledby" => "navbarDropdown"}
                  -if current_user.non_verified_user?
                    .alert.alert-warning
                      =verify_email_message(current_user.verify_remain_days)
                      -if !current_user.email_verified && current_user.email_verification_code
                        =link_to resend_verification_mail_url(current_user.email_verification_code), method: :post, class: 'btn btn-secondary verification-btn btn-sm mb-3 mb-sm-0' do
                          ='Resend Verification Email'

                  =link_to t('views.users.show.h1'), account_url, class: 'nav-link dropdown-item'
                  =link_to t('views.general.log_out'), sign_out_url, class: 'nav-link dropdown-item'

            -else
              -@navbar_landing_pages.each do |navbar_landing_page|
                %li.nav-item
                  =link_to footer_landing_page_url(navbar_landing_page.public_url), class: 'nav-link' do
                    %span=navbar_landing_page.name
              %li.nav-item
                =link_to pricing_url, class: 'nav-link' do
                  %span Pricing
              %li.nav-item.dropdown.course-dropdown
                %a#navbarDropdown.nav-link.dropdown-toggle{"aria-expanded" => "false", "aria-haspopup" => "true", "data-toggle" => "dropdown", :href => "#", :role => "button"}
                  %span Courses
                .dropdown-menu.dropdown-menu-right.dropdown-menu-course{"aria-labelledby" => "navbarDropdown"}
                  -@groups.each do |group|
                    =link_to group.name, group_landing_url(group.name_url), class: 'nav-link dropdown-item'
              %li.nav-item
                =link_to new_student_url, class: 'nav-link' do
                  %span Register
              %li.nav-item
                =link_to 'Log In', sign_in_url, {class: 'nav-link'}


    =render partial: 'layouts/external_banner'
