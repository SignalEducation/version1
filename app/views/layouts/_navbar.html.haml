.navbar.navbar-inverse.navbar-fixed-top{role:'navigation'}
  .container
    .navbar-header
      %button.navbar-toggle.collapsed{type: 'button', data: {toggle: 'collapse', target: '.navbar-collapse'}}
        %span.sr-only Toggle navigation
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar
      %a.navbar-brand{href: '/'} Learn Signal

    .collapse.navbar-collapse
      %ul.nav.navbar-nav
        =render partial: 'layouts/custom_nav_links', locals: {link_type: 'navbar'}
        %li
          %a{href: 'http://blog.learnsignal.com/', target: '_blank'} Blog
        %li.active
          %a{href: '#'} Dashboard
        %li
          =link_to t('views.library.show.h1'), library_url
      %ul.nav.navbar-nav.navbar-right
        -if current_user
          -if current_user.user_group.tutor
            %li.dropdown
              %a.dropdown-toggle{href: '#', data: {toggle: 'dropdown'} }
                =t('views.general.admin')
                %span.caret
              %ul.dropdown-menu{role: 'menu'}
                %li=link_to t('views.course_modules.index.h1'), course_modules_url
          -if current_user.admin?
            %li.dropdown
              %a.dropdown-toggle{href: '#', data: {toggle: 'dropdown'} }
                =t('views.general.admin')
                %span.caret
              %ul.dropdown-menu{role: 'menu'}
                %li=link_to t('views.subject_areas.index.h1'), subject_areas_url
                %li=link_to t('views.institutions.index.h1'), institutions_url
                %li=link_to t('views.qualifications.index.h1'), qualifications_url
                %li=link_to t('views.exam_levels.index.h1'), exam_levels_url
                %li=link_to t('views.exam_sections.index.h1'), exam_sections_url
                %li=link_to t('views.course_modules.index.h1'), course_modules_url
                %li.divider
                %li=link_to t('views.static_pages.index.h1'), static_pages_url
          %li
            = link_to user_notifications_url do
              -if current_user && current_user.user_notifications.unread.count > 0
                %span.badge{style: 'background-color: red;'}
                  %span.glyphicon.glyphicon-envelope
                  =current_user.user_notifications.unread.count
              -else
                %span.glyphicon.glyphicon-envelope

          %li.dropdown
            %a.dropdown-toggle{href: '#', data: {toggle: 'dropdown'} }
              %span.glyphicon.glyphicon-cog
            %ul.dropdown-menu{role: 'menu'}
              %li=link_to t('views.users.show.h1'), profile_url
              -if current_user.admin?
                %li.divider
                %li=link_to t('views.users.index.h1'), users_url
                %li=link_to t('views.user_groups.index.h1'), user_groups_url
                %li=link_to t('views.currencies.index.h1'), currencies_url
                %li=# todo link_to t('views.vat_codes.index.h1'), vat_codes_url
                %li=link_to t('views.countries.index.h1'), countries_url
                %li=link_to t('views.static_pages.index.h1'), static_pages_url
                %li.divider
                %li=link_to t('views.subscription_plans.index.h1'), subscription_plans_url
                %li=link_to t('views.corporate_customers.index.h1'), corporate_customers_url
                %li.divider
              %li=link_to t('views.general.sign_out'), sign_out_url
          %li
            =link_to '#', onclick: "$('#search_form').removeClass('hidden'); $(this).hide(); return false;" do
              %span.glyphicon.glyphicon-search
          %li#search_form.hidden
            =form_tag '/', role: 'form', class: 'navbar-form navbar-right' do
              .form-group{style: 'padding-top: 3px;'}
                =text_field_tag :search_terms, nil, placeholder: 'Search...'


        -else
          %li=link_to t('views.general.sign_in'), '#', onclick: "$('#login_form').removeClass('hidden'); $(this).hide(); return false;"
          %li#login_form.hidden
            =form_for UserSession.new, html: {role: 'form', class: 'navbar-form navbar-right'} do |f|
              .form-group{style: 'padding-top: 3px;padding-right: 5px;'}
                =f.text_field :email, placeholder: 'john@example.com', autofocus: true
                =f.password_field :password, placeholder: 'password'
                =f.submit t('views.general.go'), class: 'btn btn-success btn-sm'
                =link_to t('views.user_sessions.form.forgot_password'), forgot_password_url, class: 'navbar-link'
          %li=link_to t('views.general.sign_up'), sign_up_url, style: 'background-color: #5391cf;'
